<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <title>後台-商品操作CRUD</title>
    <style>
      .completed {
        text-decoration: line-through;
      }
    </style>
  </head>
  <body>
    <div id="app" class="container my-3">
      <button id="get" class="btn btn-outline-primary" @click="getProducts">
        Get
      </button>
      <button id="post" class="btn btn-outline-primary" @click="postProduct">
        Post
      </button>
      <button id="patch" class="btn btn-outline-primary" @click="patchProduct">
        Patch
      </button>
      <button
        id="delete"
        class="btn btn-outline-primary"
        @click="deleteProduct"
      >
        Delete
      </button>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    new Vue({
      el: "#app",
      data: {
        api: {
          uuid: "b0dc44d6-d675-48eb-8020-1d984631b476",
          path: "https://course-ec-api.hexschool.io/"
        },
        token: "ICERvT6tzljfIZTm0Bz2TgMkiEV0nGh1dMcaEP17gvCfq4cCcnbK2VEUd0US"
      },
      methods: {
        //Backend 後台 - Product list. 取得所有商品列表。
        getProducts() {
          const url = ` ${this.api.path}api/${this.api.uuid}/admin/ec/products`;
          console.log(url);
          axios.get(url).then(function(res) {
            console.log(res);
          });
        },
        //Backend 後台 - Create product. 新增商品。
        postProduct() {
          //   const url = `${apiPath}api/${uuid}/admin/ec/product`;
          //   var data = {
          //     title: "法鬥",
          //     category: "dog",
          //     content: "法鬥知多少",
          //     description: "法鬥",
          //     imageUrl: [
          //       "https://images.unsplash.com/photo-1559321966-04643588828f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=60"
          //     ],
          //     enabled: true,
          //     origin_price: 100,
          //     price: 90
          //   };
          //   axios.post(url, data).then(function(res) {
          //     console.log(res);
          //   });
        },
        //Backend 後台 - Edit product. 更新商品資訊。
        //PATCH api/{uuid}/admin/ec/product/{id}
        patchProduct() {
          const url = `${this.api.path}api/${this.api.uuid}/admin/ec/product/mMYzepm5QoNFs6SPKJ4vePFaOyI8XdQndiQLbEAwfGq6KSbOBuTTMzeg05wWAVPm`;
          //   var data = {
          //     title: "輕寵食小飯桶(54入)",
          //     category: "主食",
          //     content: "MIX主食全系列口味任選54袋(有榖無榖可混搭)",
          //     description: "小飯桶方案，有榖無榖6種口味皆可混搭",
          //     imageUrl: [
          //       "https://shoplineimg.com/5e15af144cfed1000aa3ba30/5e70428f73d03f0a8089e897/400x.webp?source_format=jpg"
          //     ],
          //     enabled: true,
          //     origin_price: 15000,
          //     price: 13500,
          //     unit: "個"
          //   };
          //id: fcCDiAow8nVXcN7jv0oseWogzM1qBYU8JbrS4PCqe9229P4xh6jEXr3EDgoZzzos;

          var data = {
            title: "蘋果甜菜牛肉15g",
            category: "主食",
            content: "高纖、低蛋白，維護心臟與肝臟運作",
            description: "全齡期 熟齡期 犬隻適用",
            imageUrl: [
              "https://shoplineimg.com/5e15af144cfed1000aa3ba30/5e3a7e35d1352600184c0d43/600x.webp?source_format=jpg"
            ],
            enabled: true,
            origin_price: 55,
            price: 50,
            unit: "個"
          };
          axios.patch(url, data).then(function(res) {
            console.log(res);
          });
        },
        //Backend 後台 - Destroy product. 刪除商品。
        //DELETE api/{uuid}admin/ec/product/{id}
        deleteProduct() {
          const url = `${this.api.path}api/${this.api.uuid}/admin/ec/product/g5cHnTCEvVa1h7ynUt2hOZCldVfRHd10v7NV51az1M7Op1o2LYwFmrxxbLkBw9j9`;

          axios.delete(url).then(function(res) {
            console.log(res);
          });
        }
      },
      created() {
        axios.defaults.headers["Authorization"] = `Bearer ${this.token}`;
      }
    });
  </script>
</html>
